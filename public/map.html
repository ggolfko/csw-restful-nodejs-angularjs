<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A fully featured admin theme which can be used to build CRM, CMS, etc.">


  <title></title>

  <script src="/bower_components/angular/angular.js"></script>
  <script src="/bower_components/angular-route/angular-route.js"></script>
  <script src="/bower_components/angular-sanitize/angular-sanitize.js"></script>
  <script src="/bower_components/angular-resource/angular-resource.js"></script>
  <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.5.0.js"></script>

  <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/core.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/components.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/icons.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/pages.css" rel="stylesheet" type="text/css" />
  <link href="assets/css/responsive.css" rel="stylesheet" type="text/css" />
  <style>
    /* Always set the map height explicitly to define the size of the div
     * element that contains the map. */

    #map {
      height: 650px;
    }
    /* Optional: Makes the sample page fill the window. */

    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
  </style>

  <!-- HTML5 Shiv and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

  <script src="assets/js/modernizr.min.js"></script>

</head>

<body class="fixed-left">

  <!-- Begin page -->
  <div id="wrapper">

    <!-- Top Bar Start -->
    <div class="topbar">

      <!-- LOGO -->
      <div class="topbar-left">
        <div class="text-center">
          <a href="/" class="logo"><i class="icon-magnet icon-c-logo"></i><span> CSW <i class="md md-album"></i> CRM</span></a>
        </div>
      </div>

      <!-- Button mobile view to collapse sidebar menu -->
      <div class="navbar navbar-default" role="navigation">
        <div class="container">
          <div class="">
            <div class="pull-left">
              <button class="button-menu-mobile open-left">
                                        <i class="ion-navicon"></i>
                                    </button>
              <span class="clearfix"></span>
            </div>

            <!-- <form role="search" class="navbar-left app-search pull-left hidden-xs">
                    <input type="text" placeholder="Search..." class="form-control">
                    <a href=""><i class="fa fa-search"></i></a>
                  </form> -->


            <ul class="nav navbar-nav navbar-right pull-right">
              <li class="hidden-xs">
                <a href="#" id="btn-fullscreen" class="waves-effect waves-light"><i class="icon-size-fullscreen"></i></a>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </div>
      </div>
    </div>
    <!-- Top Bar End -->


    <!-- ========== Left Sidebar Start ========== -->

    <div class="left side-menu">
      <div class="sidebar-inner slimscrollleft">
        <!--- Divider -->
        <div id="sidebar-menu">
          <ul>
            <li class="text-muted menu-title">Navigation</li>
            <li><a href="/" class="waves-effect"><i class="ti-home"></i> <span> Dashboard </span></a></li>
            <li><a href="map.html" class="waves-effect"><i class="ti-map-alt"></i> <span> Maps </span></a></li>
            <li><a href="gallery.html" class="waves-effect"><i class="ti-gallery"></i> <span> Gallery </span></a></li>
            <li><a href="coming-soon.html" class="waves-effect"><i class="ti-alert"></i> <span> Coming-soon </span></a></li>
            <li><a href="maintenance.html" class="waves-effect"><i class="ti-close"></i> <span> Maintenance </span></a></li>
          </ul>
          <div class="clearfix"></div>
        </div>
        <div class="clearfix"></div>
      </div>
    </div>
    <!-- Left Sidebar End -->
    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="content-page">
      <!-- Start content -->
      <div class="content">
        <div class="container">

          <!-- Page-Title -->
          <div class="row">
            <div class="col-sm-12">
              <h1 class="page-title"><span class="label label-default">CRM Maps</span></h1>
              <ol class="breadcrumb">
              </ol>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="card-box">
                <div id="map"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- container -->

      </div>
      <!-- content -->

      <footer class="footer">
        2017 Â© client-server with crm.
      </footer>

    </div>
    <!-- ============================================================== -->
    <!-- End Right content here -->
    <!-- ============================================================== -->



  </div>
  <!-- END wrapper -->

  <script>
    var resizefunc = [];
  </script>

  <!-- jQuery  -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/detect.js"></script>
  <script src="assets/js/fastclick.js"></script>
  <script src="assets/js/jquery.slimscroll.js"></script>
  <script src="assets/js/jquery.blockUI.js"></script>
  <script src="assets/js/waves.js"></script>
  <script src="assets/js/wow.min.js"></script>
  <script src="assets/js/jquery.nicescroll.js"></script>
  <script src="assets/js/jquery.scrollTo.min.js"></script>


  <script src="assets/js/jquery.core.js"></script>
  <script src="assets/js/jquery.app.js"></script>
  <script>
    function initMap() {
      var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 2,
        center: {
          lat: 0.980221,
          lng: -26.127083
        }
      });
      setMarkers(map);
    }

    function setMarkers(map) {

      const url = 'http://localhost:8080/api/crms/';
      fetch(url)
        .then((resp) => resp.json())
        .then(function(data) {
          var dataJson = data;
          // Adds markers to the map.

          // Marker sizes are expressed as a Size of X,Y where the origin of the image
          // (0,0) is located in the top left of the image.

          // Origins, anchor positions and coordinates of the marker increase in the X
          // direction to the right and in the Y direction down.
          var image = {
            url: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
            // This marker is 20 pixels wide by 32 pixels high.
            size: new google.maps.Size(20, 32),
            // The origin for this image is (0, 0).
            origin: new google.maps.Point(0, 0),
            // The anchor for this image is the base of the flagpole at (0, 32).
            anchor: new google.maps.Point(0, 32)
          };
          // Shapes define the clickable region of the icon. The type defines an HTML
          // <area> element 'poly' which traces out a polygon as a series of X,Y points.
          // The final coordinate closes the poly by connecting to the first coordinate.
          var shape = {
            coords: [1, 1, 1, 20, 18, 20, 18, 1],
            type: 'poly'
          };
          for (var i = 0; i < dataJson.length; i++) {
            var beach = dataJson[i];
            console.log(beach);
            var marker = new google.maps.Marker({
              position: {
                lat: parseFloat(dataJson[i].address.geo.lat),
                lng: parseFloat(dataJson[i].address.geo.lng)
              },
              map: map,
              icon: image,
              shape: shape,
              title: dataJson[i].name,
              zIndex: dataJson[i].id
            });
          }
        })
        .catch(function(error) {
          console.log(JSON.stringify(error));
        });

    }
  </script>


  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAYIKkO-RSgkr-MMSFxUgT9m8onu-yBvJg&callback=initMap">
  </script>


</body>

</html>
